
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>OpenAPI Enforcer | OpenAPI Enforcer</title>
  <meta name="description" content="A library that makes it easy to validate and use your OpenAPI documents.">

  <link rel="icon" href="/openapi-enforcer/favicon.png">

  <link rel="stylesheet" href="/openapi-enforcer/template-files/styles/main.css" media="all">
  
  
  <link rel="stylesheet" href="/openapi-enforcer/css/main.css" media="all">
  
  
  
</head>

<body>
  <header class="site-header">
    <div class="wrapper">
      <a class="site-title" href="/openapi-enforcer">
        OpenAPI Enforcer
      </a>

      
      <nav class="site-nav">
        <a href="#" class="menu-icon" aria-label="Menu">
          <svg viewBox="0 0 18 15">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </a>
      </nav>
      
    </div>
  </header>

<div class="page-content">
  <div class="wrapper">

    
    <div class="nav-screen"></div>
    <nav class="nav-list"><ul><li><a href="/openapi-enforcer">OpenAPI Enforcer</a></li><li><a href="/openapi-enforcer/guide">Guide</a><ul><li><a href="/openapi-enforcer/guide/component-plugins">Component Plugins</a></li><li><a href="/openapi-enforcer/guide/create-api">Create an API</a></li><li><a href="/openapi-enforcer/guide/enforcer-exception">EnforcerException</a></li><li><a href="/openapi-enforcer/guide/enforcer-result">EnforcerResult</a></li><li><a href="/openapi-enforcer/guide/exceptions">Exceptions and Warnings</a></li><li><a href="/openapi-enforcer/guide/validate-document">Validate a Document</a></li></ul></li><li><a href="/openapi-enforcer/api">API</a><ul><li><a href="/openapi-enforcer/api/openapi-enforcer" class="current-page">OpenAPI Enforcer</a></li><li><a href="/openapi-enforcer/api/components">Components</a><ul><li><a href="/openapi-enforcer/api/components/openapi">OpenAPI</a></li><li><a href="/openapi-enforcer/api/components/operation">Operation</a></li><li><a href="/openapi-enforcer/api/components/schema">Schema</a></li><li><a href="/openapi-enforcer/api/components/schema-value">Schema Value</a><ul></ul></li><li><a href="/openapi-enforcer/api/components/swagger">Swagger</a></li></ul></li><li><a href="/openapi-enforcer/api/enforcer-exception">EnforcerException</a></li><li><a href="/openapi-enforcer/api/enforcer-result">EnforcerResult</a></li></ul></li><li><a href="/openapi-enforcer/contributing">Contributing</a><ul><li><a href="/openapi-enforcer/contributing/enforcer-components">Enforcer Components</a><ul></ul></li></ul></li></ul></li></nav>
    

    <div class="page-content-main">
      <article class="post">
        <header class="post-header">
          <div class="post-subtitle">API</div>
          <h1 class="post-title">OpenAPI Enforcer</h1>
        </header>

        
        <div>
          <p><strong>Page Content</strong></p>
          <div class="section-nav"><ul class="toc"><li><a href="#enforcer">Enforcer</a></li><li><a href="#enforcerconfig">Enforcer.config</a></li><li><a href="#enforcerbundle">Enforcer.bundle</a></li><li><a href="#enforcerdereference">Enforcer.dereference</a></li><li><a href="#enforcerenforcer">Enforcer.Enforcer</a></li><li><a href="#enforcerexception">Enforcer.Exception</a></li><li><a href="#enforcerresult">Enforcer.Result</a></li><li><a href="#enforcerv2_0">Enforcer.v2_0</a></li><li><a href="#enforcerv3_0">Enforcer.v3_0</a></li></ul></div>
        </div>
        

        <div class="post-content"><h2 id="enforcer">Enforcer</h2>
<p><code>Enforcer ( definition [, options ] ) : Promise &lt; OpenAPI | Swagger &gt;</code></p>
<p>This function will dereference your OpenAPI document, validate it, produce warnings where appropriate, and return a Promise that resolves to an <a href="/openapi-enforcer/api/components/openapi">OpenAPI component</a> for an OpenAPI specification 3.x.x document or a <a href="/openapi-enforcer/api/components/swagger">Swagger component</a> for Swagger 2.0.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>definition</strong></td>
<td>The OpenAPI document specification. If a <code>string</code> is provided then it is the file path to the OpenAPI definition. If an <code>object</code> is provided then that will be used as the OpenAPI document.</td>
<td><code>string</code> or <code>object</code></td>
<td></td>
</tr>
<tr>
<td>options</td>
<td>Configuration options. See below.</td>
<td><code>object</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Options Parameter</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>fullResult</td>
<td>Get back a full <a href="/openapi-enforcer/api/enforcer-result">Enforcer Result</a> object. Enabling this will also cause warnings not to output to the console.</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>hideWarnings</td>
<td>Do not log warning messages to the console when validating your OpenAPI document. If the <code>fullResult</code> option is set to <code>true</code> then warnings will not show regardless of this setting.</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>componentOptions</td>
<td>Options to pass along to the enforcer components</td>
<td><code>object</code></td>
<td>See Component Options below.</td>
</tr>
</tbody></table>
<p><strong>Component Options</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>apiSuggestions</td>
<td>Set to <code>false</code> to disable API suggestions. When enabled, warnings will be generated where your API goes against standards, indicating what the standard is along with a source reference.</td>
<td><code>boolean</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>disablePathNormalization</td>
<td>Set to <code>true</code> to stop removing trailing slashes for incoming requests and from your paths definitions.</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>exceptionSkipCodes</td>
<td>An array of <code>string</code> values for all exception and warning codes to ignore. See the <a href="/openapi-enforcer/guide/exceptions">Guide for Exceptions and Warnings</a> for more details.</td>
<td><code>string[]</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td>exceptionEscalateCodes</td>
<td>An array of <code>string</code> values for all exception warning codes that should be escalated to errors. See the <a href="/openapi-enforcer/guide/exceptions">Guide for Exceptions and Warnings</a> for more details.</td>
<td><code>string[]</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td>requestBodyAllowedMethods</td>
<td>An <code>object</code> specifying which request methods to allow (or disallow) a request body for. The object you provide here will merge with the default value.</td>
<td><code>object</code></td>
<td><code>{ post: true, put: true, options: true, head: true, patch: true }</code></td>
</tr>
<tr>
<td>production</td>
<td>A <code>boolean</code> that when set to <code>true</code> will reduce the number of validations run on your OpenAPI document. This will allow your app to load a little faster for production. Do not use this setting if you are not sure that the OpenAPI document is valid otherwise other runtime errors are sure to occur.</td>
<td><code>boolean</code></td>
<td><code>false</code></td>
</tr>
</tbody></table>
<p><strong>Returns:</strong> A Promise</p>
<ul>
<li>that will resolve to an <a href="/openapi-enforcer/api/components/openapi">OpenAPI component</a> for an OpenAPI specification 3.x.x document or a <a href="/openapi-enforcer/api/components/swagger">Swagger component</a> for Swagger 2.0</li>
<li>or will reject with an <a href="/openapi-enforcer/api/enforcer-exception">EnforcerException</a> Error.</li>
</ul>
<p><strong>Example 1: Invalid Definition</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)

<span class="hljs-keyword">const</span> definition = {
    <span class="hljs-attr">openapi</span>: <span class="hljs-string">'3.0.0'</span>,
    <span class="hljs-attr">info</span>: {
        <span class="hljs-attr">title</span>: <span class="hljs-string">'My API'</span>,
        <span class="hljs-attr">version</span>: <span class="hljs-string">'1.3.4'</span>
    },
    <span class="hljs-attr">paths</span>: {
        <span class="hljs-string">'/person/{id}'</span>: {}
    }
}

Enforcer(definition)
    .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        <span class="hljs-built_in">console</span>.error(err.message)
        <span class="hljs-comment">// One or more warnings exist in the OpenApi definition</span>
        <span class="hljs-comment">//   at: paths &gt; /person/{id}</span>
        <span class="hljs-comment">//     No methods defined</span>
    })</code></pre>
<p><strong>Example 2: Valid Definition</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> definition = {
    <span class="hljs-attr">openapi</span>: <span class="hljs-string">'3.0.0'</span>,
    <span class="hljs-attr">info</span>: {
        <span class="hljs-attr">title</span>: <span class="hljs-string">'My API'</span>,
        <span class="hljs-attr">version</span>: <span class="hljs-string">'1.3.4'</span>
    },
    <span class="hljs-attr">paths</span>: {
        <span class="hljs-string">'/person/{id}'</span>: {
            <span class="hljs-attr">get</span>: {
                <span class="hljs-attr">parameters</span>: [
                    {
                        <span class="hljs-attr">name</span>: <span class="hljs-string">'id'</span>,
                        <span class="hljs-attr">in</span>: <span class="hljs-string">'path'</span>,
                        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">schema</span>: {
                            <span class="hljs-attr">type</span>: <span class="hljs-string">'integer'</span>
                        }
                    }
                ],
                <span class="hljs-attr">responses</span>: {
                    <span class="hljs-number">200</span>: {
                        <span class="hljs-attr">description</span>: <span class="hljs-string">'Success'</span>
                    }
                }
            },
        }
    }
};

Enforcer(definition)
    .then(<span class="hljs-function"><span class="hljs-params">openapi</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> isOpenApiInstance = openapi <span class="hljs-keyword">instanceof</span> Enforcer.v3_0.OpenApi
        <span class="hljs-built_in">console</span>.log(isOpenApiInstance);  <span class="hljs-comment">// true</span>
    })</code></pre>
<h2 id="enforcerconfig">Enforcer.config</h2>
<p>Set global configuration options for all Enforcer instances.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>useNewRefParser</td>
<td>Use the custom built ref parser to resolve multi file discriminator references. This feature is currently in beta. Please report issues on github. <a href="https://github.com/byu-oit/openapi-enforcer/issues">https://github.com/byu-oit/openapi-enforcer/issues</a></td>
<td><code>false</code></td>
</tr>
</tbody></table>
<p><strong>Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>);
Enforcer.config.useNewRefParser = <span class="hljs-literal">true</span>; <span class="hljs-comment">// use custom ref parser</span></code></pre>
<h2 id="enforcerbundle">Enforcer.bundle</h2>
<p><code>Enforcer.bundle ( definition ) : Promise &lt;object&gt;</code></p>
<p>Resolves all of the <code>$ref</code> values in a definition, reorganizes <code>$ref</code> values to meet the OpenAPI specification, and returns an object that can be stringified with <code>JSON.stringify</code>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>definition</strong></td>
<td>A <code>string</code> for the file path to the OpenAPI definition or an <code>object</code> to bundle.</td>
<td><code>string</code> or <code>object</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Parameters:</strong></p>
<ul>
<li><em>definition</em> - A <code>string</code> for the file path to the OpenAPI definition or an <code>object</code> to bundle.</li>
</ul>
<p><strong>Returns:</strong> A Promise that resolves to the bundled <code>object</code>.</p>
<h2 id="enforcerdereference">Enforcer.dereference</h2>
<p><code>Enforcer.dereference ( definition ) : Promise &lt;object&gt;</code></p>
<p>Resolves all of the <code>$ref</code> values in a definition and returns the dereferenced object.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><strong>definition</strong></td>
<td>A <code>string</code> for the file path to the OpenAPI definition or an <code>object</code> to dereference.</td>
<td><code>string</code> or <code>object</code></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Parameters:</strong></p>
<ul>
<li><em>definition</em> - A <code>string</code> for the file path to the OpenAPI definition or an <code>object</code> to dereference.</li>
</ul>
<p><strong>Returns:</strong> A Promise that resolves to the dereferenced <code>object</code>.</p>
<h2 id="enforcerenforcer">Enforcer.Enforcer</h2>
<p><code>Enforcer.Enforcer : Enforcer</code></p>
<p>A static reference to the <a href="/openapi-enforcer/api/openapi-enforcer#enforcer">Enforcer function</a>. This is helpful if you&#39;re using destructuring when you require this package.</p>
<p><strong>Destructure Example</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> { Enforcer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>);</code></pre>
<h2 id="enforcerexception">Enforcer.Exception</h2>
<p><code>Enforcer.Exception : EnforcerException</code></p>
<p>A static reference to the the <a href="/openapi-enforcer/api/enforcer-exception">EnforcerException class</a>.</p>
<h2 id="enforcerresult">Enforcer.Result</h2>
<p><code>Enforcer.Result : EnforcerResult</code></p>
<p>A static reference to the the <a href="/openapi-enforcer/api/enforcer-result">EnforcerResult class</a>.</p>
<h2 id="enforcerv2_0">Enforcer.v2_0</h2>
<p><code>Enforcer.v2_0 : object</code></p>
<p>An object containing class constructors for all <a href="/openapi-enforcer/api/components">components</a> that are part of the Swagger 2.0 specification:</p>
<p>{% include v2_0-components.html %}</p>
<p><strong>Example: Creating Schema</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = Enforcer.v2_0.Schema({ <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> })</code></pre>
<h2 id="enforcerv3_0">Enforcer.v3_0</h2>
<p><code>Enforcer.v3_0 : object</code></p>
<p>An object containing class constructors for all <a href="/openapi-enforcer/api/components">components</a> that are part of the OpenAPI specification (OAS) 3 specification:</p>
<p>{% include v3_0-components.html %}</p>
<p><strong>Example: Creating Schema</strong></p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> Enforcer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'openapi-enforcer'</span>)
<span class="hljs-keyword">const</span> [ schema ] = Enforcer.v3_0.Schema({ <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> })</code></pre>
</div>
      </article>

      <footer class="site-footer">

        
        <p>
          Caught a mistake or want to contribute to the documentation?
          <a href="https://github.com/byu-oit/openapi-enforcer/tree/master/docs-src/api/openapi-enforcer.md" target="_blank" rel="noopener">Edit this page on Github</a>
        </p>
        

        

        
        <div class="footer-links">
          
          <div><a href="https://github.com/byu-oit/openapi-enforcer" target="_blank" rel="noopener">Github</a></div>
          
          <div><a href="https://www.npmjs.com/package/openapi-enforcer" target="_blank" rel="noopener">NPM</a></div>
          
        </div>
        

      </footer>
    </div>

  </div>
</div>

<script src="/openapi-enforcer/template-files/js/main.js"></script>


</body>

</html>
